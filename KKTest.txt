*** Settings ***
Test Setup        Setup
Test Teardown     tearDown
Library           AppiumLibrary
Library           Collections
Resource          ./AndroidConfig.txt
Resource          ./Actions.txt
Library           lib.py

*** Variables ***

*** Test Cases ***
testTrackList
    List More
    Wait Until Page Contains Element    xpath=//*[@resource-id="com.skysoft.kkbox.android:id/listview"]/android.widget.RelativeLayout[1]

testListHasTenElements
    List More
    sleep    10s
    ${elements}=    Get Elements    xpath=//*[@resource-id="com.skysoft.kkbox.android:id/listview"]/android.widget.RelativeLayout/android.widget.TextView
    ${texts}=    Get Text Set    ${elements}
    ${p}=    Get Element Size    xpath=//*[@resource-id="com.skysoft.kkbox.android:id/listview"]    #xpath=//*[@resource-id="com.skysoft.kkbox.android:id/listview"]/android.widget.RelativeLayout[contains(@index, 1)]
    ${height}=    Evaluate    ${p}['height']
    Swipe    0    1700    0    100
    ${elements}=    Get Elements    xpath=//*[@resource-id="com.skysoft.kkbox.android:id/listview"]/android.widget.RelativeLayout/android.widget.TextView
    ${texts}=    Get Text Set    ${elements}    texts=${texts}
    ${count}=    Evaluate    str(len(${texts}))
    Should Be Equal    10    ${count}

testPlayTrack
    List More
    Click Element    xpath=//*[@resource-id="com.skysoft.kkbox.android:id/listview"]/android.widget.RelativeLayout[1]
    Wait Until Page Contains Element    xpath=(//android.widget.RelativeLayout[@resource-id="com.skysoft.kkbox.android:id/layout_track"])[1]    timeout=30s
    Click Element    xpath=(//android.widget.RelativeLayout[@resource-id="com.skysoft.kkbox.android:id/layout_track"])[1]
    #Wait Until Page Contains Element    xpath=//*[@resource-id="android:id/alertTitle"]
    #Click Element    xpath=//*[@resource-id="android:id/button1"]
    Wait Until Page Contains Element    xpath=//*[@resource-id ="com.skysoft.kkbox.android:id/button_navigation_play_pause"]    timeout=30s
    ${content}=    Get Element Attribute    xpath=//*[@resource-id ="com.skysoft.kkbox.android:id/button_navigation_play_pause"]    name
    Should Be Equal    暫停播放    ${content}
    Sleep    5s
    Click Element    xpath=//*[@resource-id ="com.skysoft.kkbox.android:id/button_navigation_play_pause"]

*** Keywords ***
Setup
    Open Application    ${REMOTE_SERVER}    platformName=${PLATFORM_NAME}    platformVersion=${PLATFORM_VERSION}    deviceName=${DEVICE_NAME}    app=${APP_PATH}    appPackage=${APP_PACKAGE}
    ...    appActivity=${APP_ACTIVITY}
    Wait Until Page Contains Element    xpath=//*[@resource-id="com.skysoft.kkbox.android:id/button_start_free_trial"]    timeout=30s

TearDown
    Close All Applications
    #Remove Application    ${APP_PACKAGE}
